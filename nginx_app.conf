Configuración del servidor Nginx
server {
    # Escucha en el puerto que Railway nos asigna
    listen ${PORT};

    # Directorio raíz público
    root /app/public;

    # Archivos de índice a buscar
    index index.php index.html index.htm;

    # Configuración para archivos estáticos (CSS, JS, imágenes)
    location / {
        try_files $uri $uri/ /index.php?$query_string;
    }

    # Pasa los scripts PHP al procesador PHP-FPM
    location ~ .php$ {
        # Incluye los parámetros estándar de FastCGI
        include fastcgi_params;

        # Dirección del procesador PHP-FPM
        fastcgi_pass heroku-fcgi;

        # Parámetros importantes para que PHP sepa qué archivo ejecutar
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        fastcgi_param PATH_INFO $fastcgi_path_info;
    }
}
